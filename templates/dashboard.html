{% extends "base.html" %}
{% block content %}
<h2>Dashboard operador (mock)</h2>
<ul class="stats">
  <li>Ventas d√≠a: ${{ ventas.ventas_dia }}</li>
  <li>Ticket promedio: ${{ ventas.ticket_promedio }}</li>
  <li>Pedidos activos: {{ ventas.pedidos_activos }}</li>
  <li>Horas muertas: {{ ventas.horas_muertas }}</li>
</ul>
<canvas id="ventasChart" width="400" height="220"></canvas>
<script>
document.addEventListener('DOMContentLoaded', async () => {
  const res = await fetch('/api/ventas-dia'); const data = await res.json();
  const ctx = document.getElementById('ventasChart').getContext('2d');
  const s = document.createElement('script');
  s.src = 'https://cdn.jsdelivr.net/npm/chart.js'; document.body.appendChild(s);
  s.onload = () => {
    new Chart(ctx, {
      type: 'line',
      data: { labels: data.horas, datasets: [{ label: 'Ventas por hora', data: data.series }]},
      options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });
  };
});
</script>
{% endblock %}
